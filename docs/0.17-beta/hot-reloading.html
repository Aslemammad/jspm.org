<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Hot-Reloading | jspm 0.17 Beta Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.3">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="./package-configuration.html" />
    
    
    <link rel="prev" href="./development-bundling.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="3"
        data-chapter-title="Hot-Reloading"
        data-filepath="hot-reloading.md"
        data-basepath="."
        data-revision="Mon Feb 27 2017 09:57:14 GMT+0200 (SAST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="creating-a-project.html">
            
                
                    <a href="./creating-a-project.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Creating a Project
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="development-bundling.html">
            
                
                    <a href="./development-bundling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Development Bundling
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3" data-path="hot-reloading.html">
            
                
                    <a href="./hot-reloading.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Hot-Reloading
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="package-configuration.html">
            
                
                    <a href="./package-configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Package Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="installing-the-jsx-babel-plugin.html">
            
                
                    <a href="./installing-the-jsx-babel-plugin.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Installing the JSX Babel Plugin
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="universal-js-with-server-rendering.html">
            
                
                    <a href="./universal-js-with-server-rendering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Universal JS with Server Rendering
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="npm-package-support.html">
            
                
                    <a href="./npm-package-support.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        npm Package Support
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="bundling.html">
            
                
                    <a href="./bundling.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Bundling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="loading-libraries-from-cdn.html">
            
                
                    <a href="./loading-libraries-from-cdn.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Loading Libraries from CDN
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="custom-package-resolutions.html">
            
                
                    <a href="./custom-package-resolutions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Custom Package Resolutions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="static-builds-with-rollup-optimization.html">
            
                
                    <a href="./static-builds-with-rollup-optimization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Static Builds with Rollup Optimization
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="publishing.html">
            
                
                    <a href="./publishing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Publishing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="peer-dependencies.html">
            
                
                    <a href="./peer-dependencies.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Peer Dependencies
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="linking.html">
            
                
                    <a href="./linking.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        Linking
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="overrides.html">
            
                
                    <a href="./overrides.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        Overrides
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16" data-path="conditional-loading.html">
            
                
                    <a href="./conditional-loading.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        Conditional Loading
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="17" data-path="conditional-substitution.html">
            
                
                    <a href="./conditional-substitution.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        Conditional Substitution
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >jspm 0.17 Beta Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="hot-reloading">Hot Reloading</h2>
<blockquote>
<p>This workflow is entirely optional, as managing application state comes with some complexities, but offers the fastest development experience if you&apos;re interested in setting it up.</p>
</blockquote>
<p>To further improve development performance over the development bundling workflow, we can use hot reloading to just replace the changed modules in the module registry in the browser,
without having to refresh the whole page.</p>
<p>Because hot-reloading requires a module registry in the browser to work, it works naturally on top of SystemJS,
as was first demonstrated by <a href="https://twitter.com/glenmaddern" target="_blank">Glen Maddern</a> with the jspm-server project.</p>
<p>Here we will use <a href="https://github.com/alexisvincent" target="_blank">Alexis Vincent&apos;s</a>&apos;s <a href="https://github.com/alexisvincent/systemjs-hot-reloader" target="_blank">systemjs-hot-reloader</a> project.</p>
<pre><code>jspm install --dev systemjs-hot-reloader
</code></pre><p>Add <code>&quot;@hot&quot;: &quot;@empty&quot;</code> to your <code>jspm.config.js</code> map section</p>
<pre><code class="lang-js">{
  ...
  <span class="hljs-string">&quot;map&quot;</span>: {
    ...
    <span class="hljs-string">&quot;@hot&quot;</span>: <span class="hljs-string">&quot;@empty&quot;</span>
  }
}
</code></pre>
<p>Update <code>test.html</code> so that you first import the hot reloader</p>
<pre><code class="lang-html"><span class="hljs-doctype">&lt;!doctype html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">&quot;utf-8&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;jspm_packages/system.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;jspm.config.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;container&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="actionscript">
    SystemJS.<span class="hljs-keyword">import</span>(<span class="hljs-string">&apos;systemjs-hot-reloader&apos;</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(connect)</span> </span>{
      connect()
      SystemJS.<span class="hljs-keyword">import</span>(<span class="hljs-string">&apos;test.js&apos;</span>);
    })
  </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
</code></pre>
<blockquote>
<p>The next step is optional and seeks to give an example of how to maintain state across reloads.</p>
</blockquote>
<p>And then update the <code>test.js</code> file to maintain the internal component state over hot-reload updates. We import <code>module</code>
from <code>@hot</code> which will give us our previous module instance,
or <code>false</code> on first load. Then if <code>module</code> is truthy (this is a
reload), we set the current component state to the old component state. Note that to get a hold of the old component state we need to export it from the module.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react-dom&apos;</span>;
<span class="hljs-keyword">import</span> {HelloWorld} <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;jspm-react-component/component.js&apos;</span>;

<span class="hljs-keyword">import</span> { module } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;@hot&apos;</span>

let container = document.getElementById(<span class="hljs-string">&apos;container&apos;</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> component = ReactDOM.render(React.createElement(HelloWorld), container);

<span class="hljs-keyword">if</span> (<span class="hljs-built_in">module</span>)
  component.setState(<span class="hljs-built_in">module</span>.component.state);
</code></pre>
<p>Finally, to emit the change events to the browser we install and run the local file event
emitter designed for <code>systemjs-hot-reloader</code> from the base directory of the project:</p>
<pre><code>npm install -g chokidar-socket-emitter

chokidar-socket-emitter
</code></pre><p>With the <code>test.html</code> page open, any edits to the <code>src/component.js</code> file will now reflect instantly on save with full
state replication.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./development-bundling.html" class="navigation navigation-prev " aria-label="Previous page: Development Bundling"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./package-configuration.html" class="navigation navigation-next " aria-label="Next page: Package Configuration"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"ga":{"token":"UA-40327700-1","configuration":"auto"},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
